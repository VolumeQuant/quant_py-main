# í•œêµ­ ì£¼ì‹ í€€íŠ¸ íˆ¬ì ì‹œìŠ¤í…œ

KOSPI/KOSDAQ ëŒ€ìƒ ë©€í‹°íŒ©í„° í€€íŠ¸ ì „ëµ â€” **Slow In, Fast Out**

---

## 1. ê°œìš”

| í•­ëª© | ë‚´ìš© |
|------|------|
| **ì „ëµ ì² í•™** | **Slow In, Fast Out** â€” 3ì¼ ê²€ì¦ í›„ ì§„ì…, 50ìœ„ ì´íƒˆ ì‹œ ì¦‰ì‹œ ê²½ë³´ |
| **ì „ëµ A** | ë§ˆë²•ê³µì‹ (Magic Formula) â†’ **ì‚¬ì „ í•„í„° 200ê°œ** (ìˆœìœ„ ë¯¸ë°˜ì˜) |
| **ì „ëµ B** | ë©€í‹°íŒ©í„° - Value(50%) + Quality(30%) + Momentum(20%, ë¦¬ìŠ¤í¬ ì¡°ì •) â†’ **ìµœì¢… ìˆœìœ„ 100%** |
| **MA60 í•„í„°** | í˜„ì¬ê°€ < 60ì¼ ì´ë™í‰ê·  ì¢…ëª© ì›ì²œ ì°¨ë‹¨ (ê°€ì¹˜ í•¨ì • ë°©ì§€) |
| **ë§¤ìˆ˜ ì¶”ì²œ** | 3ê±°ë˜ì¼ ì—°ì† Top 30 êµì§‘í•© (ê°€ì¤‘ìˆœìœ„: T0Ã—0.5+T1Ã—0.3+T2Ã—0.2), ìµœëŒ€ 5ì¢…ëª© |
| **Death List** | Top 50 ì´íƒˆ ì¢…ëª© ì¦‰ì‹œ ì•Œë¦¼ (Fast Out) |
| **ìœ ë‹ˆë²„ìŠ¤** | ì‹œê°€ì´ì•¡ 3000ì–µ+, ê±°ë˜ëŒ€ê¸ˆ ì°¨ë“±(ëŒ€í˜•50ì–µâ†‘/ì¤‘ì†Œí˜•20ì–µâ†‘), PERâ‰¤60, PBRâ‰¤10, ê¸ˆìœµ/ì§€ì£¼ì‚¬ ì œì™¸ |
| **ì‹œì¥ ê²½ê³ ** | KOSPI/KOSDAQ ì´í‰ì„  ì§„ë‹¨ (MA5/MA20/MA60, ë°ë“œí¬ë¡œìŠ¤) â†’ ê²½ê³  ì‹œ ì§„ì… ìì œ ê¶Œê³  |
| **ë¹„ì¤‘** | ì¢…ëª©ë‹¹ 20% (5ì¢…ëª© Ã— 20% = 100%) |
| **ì½œë“œ ìŠ¤íƒ€íŠ¸** | 3ê±°ë˜ì¼ ë°ì´í„° í™•ë³´ ì „ê¹Œì§€ ì±„ë„ ì „ì†¡ ìŠ¤í‚µ (ê°œì¸ë´‡ì—ë§Œ ì „ì†¡) |
| **í…”ë ˆê·¸ë¨** | ë§¤ì¼ 06:30 KST ìë™ ì „ì†¡ (4ë©”ì‹œì§€: ê°€ì´ë“œ â†’ ì‹œì¥+Top30 â†’ AI ë¦¬ìŠ¤í¬ í•„í„° â†’ ìµœì¢… ì¶”ì²œ), HTML ë³¼ë“œ |

### ë°±í…ŒìŠ¤íŠ¸ ì„±ê³¼ (2015-2025)

| ì§€í‘œ | KOSPI | ì „ëµ A | ì „ëµ B |
|------|-------|--------|--------|
| **CAGR** | 7.58% | **11.98%** | **13.15%** |
| **MDD** | -43.90% | -24.42% | -33.90% |
| **Sharpe** | 0.27 | 0.53 | 0.53 |
| **ì´ˆê³¼ìˆ˜ìµ** | - | +4.4%p | +5.6%p |

---

## 2. ë¹ ë¥¸ ì‹œì‘

### Python í™˜ê²½

ì•„ë˜ ë‘ ê²½ë¡œ ì¤‘ í•˜ë‚˜ì˜ Pythonì„ ì‚¬ìš©:
```
C:\Users\jkw88\miniconda3\envs\volumequant\python.exe
C:\Users\user\miniconda3\envs\volumequant\python.exe
```

### ì‹¤í–‰ ë°©ë²•

```bash
# 1. íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install pykrx pandas numpy requests beautifulsoup4 lxml pyarrow tqdm scipy html5lib google-genai

# 2. í…”ë ˆê·¸ë¨ ì„¤ì • (ì„ íƒ)
cp config_template.py config.py
# config.pyì—ì„œ TELEGRAM_BOT_TOKEN, TELEGRAM_CHAT_ID ì„¤ì •

# 3. í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„±
python create_current_portfolio.py
# - ìºì‹œ ëª¨ë“œ: ~2ë¶„ (ì»¨ì„¼ì„œìŠ¤ ìˆ˜ì§‘ í¬í•¨)
# - ì „ì²´ ìˆ˜ì§‘: ~5-10ë¶„

# 4. í…”ë ˆê·¸ë¨ ì „ì†¡
python send_telegram_auto.py

# 5. ì „ì²´ ë°±í…ŒìŠ¤íŒ… (~15ë¶„ ì†Œìš”)
python full_backtest.py
```

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

```
quant_py-main/
â”‚
â”œâ”€â”€ [í•µì‹¬ ëª¨ë“ˆ] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”œâ”€â”€ error_handler.py          # Skip & Log ì—ëŸ¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ fnguide_crawler.py        # FnGuide ì¬ë¬´ì œí‘œ ìºì‹œ + ê°€ì¤‘TTM
â”‚   â”œâ”€â”€ data_collector.py         # pykrx API + ë³‘ë ¬ ì²˜ë¦¬
â”‚   â”œâ”€â”€ strategy_a_magic.py       # ì „ëµ A: ë§ˆë²•ê³µì‹ (ì‚¬ì „ í•„í„°)
â”‚   â”œâ”€â”€ strategy_b_multifactor.py # ì „ëµ B: ë©€í‹°íŒ©í„° (ë¦¬ìŠ¤í¬ ì¡°ì • ëª¨ë©˜í…€)
â”‚   â”œâ”€â”€ ranking_manager.py        # ì¼ì¼ ìˆœìœ„ ì €ì¥/3ì¼ êµì§‘í•©/Death List
â”‚   â””â”€â”€ gemini_analysis.py        # Gemini AI ë¦¬ìŠ¤í¬ í•„í„° + ìµœì¢… ì¶”ì²œ ë©˜íŠ¸
â”‚
â”œâ”€â”€ [ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”œâ”€â”€ create_current_portfolio.py  # í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± + ìˆœìœ„ JSON ì €ì¥
â”‚   â”œâ”€â”€ send_telegram_auto.py        # í…”ë ˆê·¸ë¨ 4ë©”ì‹œì§€ ì „ì†¡ (ê°€ì´ë“œâ†’ì‹œì¥â†’AIâ†’ìµœì¢…)
â”‚   â”œâ”€â”€ full_backtest.py             # ì „ì²´ ë°±í…ŒìŠ¤íŒ…
â”‚   â””â”€â”€ generate_report_pdf.py       # PDF ë¦¬í¬íŠ¸ ìƒì„±
â”‚
â”œâ”€â”€ [ì„¤ì •] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”œâ”€â”€ config.py                # APIí‚¤/í…”ë ˆê·¸ë¨ ì„¤ì • (gitignore)
â”‚   â””â”€â”€ config_template.py       # ì„¤ì • í…œí”Œë¦¿
â”‚
â”œâ”€â”€ [ìƒíƒœ ì €ì¥] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â””â”€â”€ state/                   # ì¼ì¼ ìˆœìœ„ JSON (GitHub Actionsê°€ git commit)
â”‚       â””â”€â”€ ranking_YYYYMMDD.json
â”‚
â”œâ”€â”€ [ì¶œë ¥ ë””ë ‰í† ë¦¬] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â”œâ”€â”€ output/                  # í¬íŠ¸í´ë¦¬ì˜¤ CSV/ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ backtest_results/        # ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼
â”‚
â”œâ”€â”€ [ìºì‹œ] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
â”‚   â””â”€â”€ data_cache/              # ì¬ë¬´ì œí‘œ/OHLCV parquet ìºì‹œ
â”‚
â””â”€â”€ [ë¬¸ì„œ] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
    â”œâ”€â”€ README.md                # í”„ë¡œì íŠ¸ ê°œìš” (ì´ íŒŒì¼)
    â””â”€â”€ SESSION_HANDOFF.md       # ê°œë°œ íˆìŠ¤í† ë¦¬/ê¸°ìˆ  ë¬¸ì„œ
```

---

## 4. í•µì‹¬ ëª¨ë“ˆ ìƒì„¸

### 4.1 ë°ì´í„° íë¦„

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        ë°ì´í„° ìˆ˜ì§‘                               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  pykrx API                          FnGuide                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”               â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                â”‚
â”‚  â”‚ ì‹œê°€ì´ì•¡    â”‚               â”‚ ì¬ë¬´ì œí‘œ     â”‚                â”‚
â”‚  â”‚ OHLCV      â”‚               â”‚ (ìºì‹œ)       â”‚                â”‚
â”‚  â”‚ PER/PBR/DIVâ”‚               â”‚              â”‚                â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜               â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”˜                â”‚
â”‚         â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                        â”‚
â”‚                        â–¼                                        â”‚
â”‚                 â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                 â”‚
â”‚                 â”‚  ìœ ë‹ˆë²„ìŠ¤   â”‚                                 â”‚
â”‚                 â”‚ ì‹œì´3000ì–µ+ â”‚                                 â”‚
â”‚                 â”‚ ê±°ë˜ ì°¨ë“±   â”‚                                 â”‚
â”‚                 â”‚ PERâ‰¤60     â”‚                                 â”‚
â”‚                 â”‚ PBRâ‰¤10     â”‚                                 â”‚
â”‚                 â””â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”˜                                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                         â”‚
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        â”‚     ì „ëµ ì‹¤í–‰                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                        â–¼                                        â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚  MA60 ì¶”ì„¸ í•„í„°  â”‚                                â”‚
â”‚              â”‚ í˜„ì¬ê°€ < MA60   â”‚                                â”‚
â”‚              â”‚   â†’ ì œì™¸        â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                       â–¼                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚   ì „ëµ A ì‚¬ì „í•„í„° â”‚                               â”‚
â”‚              â”‚   (ë§ˆë²•ê³µì‹)     â”‚                                â”‚
â”‚              â”‚   ìƒìœ„ 200ì¢…ëª©   â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                       â–¼                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚  ì „ëµ B ìŠ¤ì½”ì–´ë§ â”‚                                â”‚
â”‚              â”‚  (ë©€í‹°íŒ©í„°)      â”‚                                â”‚
â”‚              â”‚ ë¦¬ìŠ¤í¬ì¡°ì •ëª¨ë©˜í…€ â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                       â–¼                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚ ë©€í‹°íŒ©í„° 100%   â”‚                                â”‚
â”‚              â”‚ ìˆœìœ„ JSON ì €ì¥  â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â”‚                       â–¼                                         â”‚
â”‚              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                                â”‚
â”‚              â”‚ 3ì¼ êµì§‘í•© ê²€ì¦  â”‚                                â”‚
â”‚              â”‚ Death List ê³„ì‚° â”‚                                â”‚
â”‚              â”‚ Survivors Top50 â”‚                                â”‚
â”‚              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### 4.2 ì „ëµ A - ë§ˆë²•ê³µì‹ (ì‚¬ì „ í•„í„°)

```
ì´ìµìˆ˜ìµë¥  = EBIT / EV      (EV = ì‹œê°€ì´ì•¡ + ì´ë¶€ì±„ - ì—¬ìœ ìê¸ˆ)
íˆ¬í•˜ìë³¸ìˆ˜ìµë¥  = EBIT / IC   (IC = (ìœ ë™ìì‚° - ìœ ë™ë¶€ì±„) + ë¹„ìœ ë™ìì‚°)

ë§ˆë²•ê³µì‹_ìˆœìœ„ = rank(ì´ìµìˆ˜ìµë¥ ) + rank(ROIC)
â†’ ìƒìœ„ 200ì¢…ëª© ì‚¬ì „ í•„í„° (ìˆœìœ„ ë°˜ì˜ ì—†ì´ ìŠ¤í¬ë¦¬ë‹ë§Œ)
```

### 4.3 ì „ëµ B - ë©€í‹°íŒ©í„° (ìµœì¢… ìŠ¤ì½”ì–´ë§)

```
Value   50%: PER(ì‹¤ì‹œê°„) + PBR(ì‹¤ì‹œê°„) + PCR + PSR + DIV(ì‹¤ì‹œê°„)
Quality 30%: ROE + GPA + CFO/Assets + EPSê°œì„ ë„(Forward PER ê¸°ë°˜)
Momentum 20%: (12Mìˆ˜ìµë¥  - 1Mìˆ˜ìµë¥ ) / 12Më³€ë™ì„±(ì—°í™˜ì‚°) [ë¦¬ìŠ¤í¬ ì¡°ì •]

ë©€í‹°íŒ©í„°_ì ìˆ˜ = Value*0.5 + Quality*0.3 + Momentum*0.2

ëª¨ë©˜í…€ ê³µì‹ (v5.0):
  Score = (12Mìˆ˜ìµë¥  - 1Mìˆ˜ìµë¥ ) / 12Më³€ë™ì„±(ì—°í™˜ì‚°, floor 15%)
  - 12Mìˆ˜ìµë¥  â‰¤ 0 â†’ ì œì™¸ (í•˜ë½ ì¶”ì„¸)
  - ë³€ë™ì„± í•˜í•œì„  15% (ì €ë³€ë™ ì¢…ëª© ì ìˆ˜ í­ë°œ ë°©ì§€)

EPSê°œì„ ë„ = (Trailing PER - Forward PER) / Trailing PER * 100
  ì–‘ìˆ˜ = ì‹¤ì  ê°œì„  ì¤‘, ìŒìˆ˜ = ì‹¤ì  ì•…í™” ì¤‘
  Forward PER: FnGuide ì»¨ì„¼ì„œìŠ¤ (ì»¤ë²„ë¦¬ì§€ ~80%)
```

### 4.4 ê°€ì¤‘ TTM (Weighted Trailing Twelve Months)

```
ì†ìµê³„ì‚°ì„œ/í˜„ê¸ˆíë¦„í‘œ í•­ëª©:
  ìµœì‹  ë¶„ê¸°: 40% (ê°€ì¤‘ì¹˜ 1.6)
  2ë²ˆì§¸ ë¶„ê¸°: 30% (ê°€ì¤‘ì¹˜ 1.2)
  3ë²ˆì§¸ ë¶„ê¸°: 20% (ê°€ì¤‘ì¹˜ 0.8)
  4ë²ˆì§¸ ë¶„ê¸°: 10% (ê°€ì¤‘ì¹˜ 0.4)
  í•©ê³„ = 4.0 (ê¸°ì¡´ TTM í•©ì‚°ê³¼ ë™ì¼ ìŠ¤ì¼€ì¼)
â†’ ìµœê·¼ ì‹¤ì  ë³€í™”ë¥¼ ë” ì˜ ë°˜ì˜
```

### 4.5 MA60 ì¶”ì„¸ í•„í„°

```
í˜„ì¬ê°€ >= 60ì¼ ì´ë™í‰ê·  â†’ í†µê³¼
í˜„ì¬ê°€ <  60ì¼ ì´ë™í‰ê·  â†’ ì œì™¸ (ê°€ì¹˜ í•¨ì • ì›ì²œ ì°¨ë‹¨)

â†’ ì•„ë¬´ë¦¬ ì €í‰ê°€ë¼ë„ ì¤‘ê¸° í•˜ë½ ì¶”ì„¸ë©´ ì§„ì…í•˜ì§€ ì•ŠìŒ
```

### 4.6 3ì¼ êµì§‘í•© (Slow In)

```
ì¼ì¼ ìˆœìœ„ë¥¼ state/ranking_YYYYMMDD.jsonì— ì €ì¥
3ê±°ë˜ì¼(T-0, T-1, T-2) ì—°ì† Top 30ì— ìˆëŠ” ì¢…ëª©ë§Œ ë§¤ìˆ˜ ì¶”ì²œ

ê°€ì¤‘ í‰ê·  ìˆœìœ„: T-0 Ã— 0.5 + T-1 Ã— 0.3 + T-2 Ã— 0.2
â†’ ê°€ì¤‘ìˆœìœ„ ë‚®ì€ ìˆœì„œëŒ€ë¡œ ìµœëŒ€ 5ì¢…ëª©
â†’ 0ê°œë©´ "ê´€ë§" (ë¬´ë¦¬í•œ ì§„ì… ë°©ì§€)
â†’ ì½œë“œ ìŠ¤íƒ€íŠ¸: ìˆœìœ„ ë°ì´í„° 3ì¼ ë¯¸ë§Œì´ë©´ ê´€ë§

ì¢…ëª©ë‹¹ ë¹„ì¤‘: 20% (5ì¢…ëª© Ã— 20% = 100%)
```

### 4.6a Death List (Fast Out)

```
ì–´ì œ(T-1) Top 50ì— ìˆì—ˆìœ¼ë‚˜ ì˜¤ëŠ˜(T-0) 51ìœ„ ë°–ìœ¼ë¡œ ì´íƒˆí•œ ì¢…ëª©
â†’ ì „ì²´ íƒˆë½ì ëª©ë¡ í‘œì‹œ (cap ì—†ìŒ)
â†’ ë³´ìœ  ì¢…ëª©ì´ ìˆìœ¼ë©´ ë§¤ë„ ê²€í†  ê¶Œì¥
```

### 4.7 ì‹œì¥ ì´í‰ì„  ê²½ê³ 

```
KOSPI/KOSDAQ ì§€ìˆ˜ì˜ ì´ë™í‰ê· ì„  ìƒíƒœë¥¼ ìë™ ì§„ë‹¨
120ì¼ ë°ì´í„°ë¡œ MA5, MA20, MA60 ê³„ì‚°

ê°ì§€ ì‹ í˜¸:
  - 5ì¼ì„ â†“: í˜„ì¬ê°€ < MA5 (ë‹¨ê¸° ì¡°ì •)
  - 20ì¼ì„ â†“: í˜„ì¬ê°€ < MA20 (ì¤‘ê¸° í•˜ë½)
  - 60ì¼ì„ â†“: í˜„ì¬ê°€ < MA60 (ì¥ê¸° í•˜ë½)
  - ë‹¨ê¸°DC: MA5 < MA20 (ë°ë“œí¬ë¡œìŠ¤)

ê²½ê³  ìˆ˜ì¤€:
  âš¡ ì£¼ì˜: 1ê°œ ì‹ í˜¸
  âš ï¸ ê²½ê³„: 2ê°œ ì‹ í˜¸
  ğŸš¨ ìœ„í—˜: 3ê°œ+ ì‹ í˜¸

â†’ ê²½ê³  ì‹œ "ì‹ ê·œ ë§¤ìˆ˜ ì‹œ ìœ ì˜í•˜ì„¸ìš”" ë¬¸êµ¬ í‘œì‹œ
â†’ ì–‘í˜¸ ì‹œ ê²½ê³  ë¸”ë¡ ìƒëµ (ê¹”ë”í•œ í—¤ë” ìœ ì§€)
```

### 4.8 í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ (v8.1 â€” 4ë©”ì‹œì§€)

```
ë©”ì‹œì§€ íë¦„: ğŸ“– ê°€ì´ë“œ â†’ [1/3] ì‹œì¥ â†’ [2/3] AI â†’ [3/3] ìµœì¢…

ğŸ“– íˆ¬ì ê°€ì´ë“œ
  - 5ë‹¨ê³„ ì„ ì • ê³¼ì • (â‘ ~â‘¤)
  - ë³´ìœ /ë§¤ë„ ê¸°ì¤€
  - [1/3] [2/3] [3/3] ë©”ì‹œì§€ ì•ˆë‚´

[1/3] ğŸ“Š ì‹œì¥ + Top 30 â€” parse_mode='HTML'
  - ë‚ ì§œ + ì½”ìŠ¤í”¼/ì½”ìŠ¤ë‹¥ ê°ê° ë³„ë„ ì¤„ (ê°œë³„ ìƒ‰ìƒ)
  - ì´í‰ì„  ê²½ê³  ë¸”ë¡ (ìˆì„ ë•Œë§Œ í‘œì‹œ)
  - ì½ëŠ” ë²• (âœ… 3ì¼ ê²€ì¦ / â³ ë‚´ì¼ ê²€ì¦ / ğŸ†• ì‹ ê·œ ì§„ì…)
  - Top 30 ìƒíƒœë³„ ê·¸ë£¹í•‘ (ê·¸ë£¹ ê°„ ë¹ˆ ì¤„)
  - â›” ì´íƒˆ ì¢…ëª© (ë§¤ë„ ê²€í† )
  - "ğŸ‘‰ ë‹¤ìŒ: AI ë¦¬ìŠ¤í¬ í•„í„° [2/3]"

[2/3] ğŸ›¡ï¸ AI ë¦¬ìŠ¤í¬ í•„í„° â€” parse_mode='HTML'
  - Gemini 2.5 Flash + Google Search Grounding
  - ğŸ“° ì‹œì¥ ë™í–¥ (ê²€ìƒ‰ ê¸°ë°˜)
  - âš ï¸ ë§¤ìˆ˜ ì£¼ì˜ ì¢…ëª© (ì½”ë“œê°€ ê³„ì‚°í•œ ìœ„í—˜ í”Œë˜ê·¸ ê¸°ë°˜)
  - âœ… ìœ„í—˜ ì‹ í˜¸ ì—†ìŒ (ì½”ë“œ ì§ì ‘ ìƒì„±)
  - "ğŸ‘‰ ë‹¤ìŒ: ìµœì¢… ì¶”ì²œ [3/3]"

[3/3] ğŸ¯ ìµœì¢… ì¶”ì²œ â€” parse_mode='HTML'
  - í¼ë„ ê²½ë¡œ (598ì¢…ëª© â†’ Top 30 â†’ âœ… ê²€ì¦ â†’ ìµœì¢… Nì¢…ëª©)
  - ğŸ“Š ë¹„ì¤‘ í•œëˆˆì— ë³´ê¸° (ì›ë¼ì¸ ìš”ì•½)
  - ì¢…ëª©ë³„ AI ë©˜íŠ¸ (Gemini ìƒì„±, ë‚ ì”¨ì•„ì´ì½˜ + 1-2ì¤„ ì„ ì • ì´ìœ )
  - êµ¬ë¶„ì„ ìœ¼ë¡œ ì¢…ëª© ë¶„ë¦¬
  - ğŸ’¡ í™œìš©ë²• + ë©´ì±… ë¬¸êµ¬
  - AI ì‹¤íŒ¨ ì‹œ ì½”ë“œ ê¸°ë°˜ rationale fallback

ì½œë“œ ìŠ¤íƒ€íŠ¸ (3ì¼ ë¯¸í™•ë³´):
  - [2/3] [3/3] ìƒëµ, ê°€ì´ë“œ + [ì‹œì¥+Top30]ë§Œ ì „ì†¡
  - ì±„ë„ ì „ì†¡ ìŠ¤í‚µ, ê°œì¸ë´‡ì—ë§Œ ì „ì†¡
```

### 4.9 AI ë¶„ì„ (Gemini) â€” 2ë‹¨ê³„

```
"ê²€ìƒ‰ì€ ì½”ë“œê°€, ë¶„ì„ì€ AIê°€" ì›ì¹™

[1ë‹¨ê³„] AI ë¦¬ìŠ¤í¬ í•„í„° (run_ai_analysis)
â†’ ë§¤ìˆ˜ í›„ë³´ ì¢…ëª©ì˜ ìœ„í—˜ ì‹ í˜¸ë¥¼ ì½”ë“œê°€ ê³„ì‚°, AIê°€ í•´ì„
â†’ Gemini 2.5 Flash + Google Search Grounding
â†’ ì‹œì¥ ë™í–¥ ê²€ìƒ‰(1íšŒ) + ìœ„í—˜ ì‹ í˜¸ í•´ì„
â†’ í”Œë˜ê·¸ì— ê±¸ë ¤ë„ ìµœì¢… ì¶”ì²œì—ì„œ ë¹ ì§€ì§€ ì•ŠìŒ (ê²½ê³ ë§Œ)

ìœ„í—˜ í”Œë˜ê·¸ 4ê°œ (ëª¨ë¸ì´ ëª» ì¡ëŠ” ë‹¹ì¼ ì´ë²¤íŠ¸ë§Œ):
  ğŸ”º RSI â‰¥ 80 (ê·¹ë‹¨ì  ê³¼ì—´)
  âš ï¸ ì „ì¼ -5% ì´ìƒ ê¸‰ë½ (ì•…ì¬ í™•ì¸)
  ğŸ”º ì „ì¼ +8% ì´ìƒ ê¸‰ë“± (ì¶”ê²©ë§¤ìˆ˜ ìœ„í—˜)
  ğŸ“Š ê±°ë˜ëŸ‰ í‰ì†Œ 3ë°° ì´ìƒ (ë¹„ì •ìƒ ì›€ì§ì„)

ì œê±°ëœ í”Œë˜ê·¸ (ëª¨ë¸ê³¼ ì¶©ëŒ):
  52ì£¼ -35% ê¸‰ë½ â†’ "ì‹¸ê²Œ ì‚¬ì" ì² í•™ê³¼ ì¶©ëŒ + MA60ì´ ê°€ì¹˜í•¨ì • ì°¨ë‹¨
  PER > 40 â†’ Value 50% + ìœ ë‹ˆë²„ìŠ¤ PERâ‰¤60ê³¼ ì¤‘ë³µ

[2ë‹¨ê³„] ìµœì¢… ì¶”ì²œ AI ë©˜íŠ¸ (run_final_picks_analysis)
â†’ ì¢…ëª©ë³„ 1-2ì¤„ ì„ ì • ì´ìœ ë¥¼ AIê°€ ìì—°ì–´ë¡œ ì‘ì„±
â†’ ë‚ ì”¨ì•„ì´ì½˜ (ğŸ”¥/â˜€ï¸/ğŸŒ¤ï¸/â›…) + ì„ ì • ì´ìœ 
â†’ Gemini 2.5 Flash (ê²€ìƒ‰ ì—†ìŒ, temperature=0.2)
â†’ 500ì ì´ë‚´, [SEP] êµ¬ë¶„ì â†’ ì½”ë“œê°€ êµ¬ë¶„ì„ ìœ¼ë¡œ ì¹˜í™˜
```

---

## 5. ì„¤ì • íŒŒì¼

### config.py (gitignore)

```python
TELEGRAM_BOT_TOKEN = "your_bot_token"
TELEGRAM_CHAT_ID = "your_chat_id"
TELEGRAM_PRIVATE_ID = "your_private_id"
MIN_MARKET_CAP = 3000
PER_MAX_LIMIT = 60
PBR_MAX_LIMIT = 10
MAX_CONCURRENT_REQUESTS = 10
PYKRX_WORKERS = 10
PREFILTER_N = 200
N_STOCKS = 30
GEMINI_API_KEY = "your_gemini_api_key"
```

---

## 6. GitHub Actions ìë™í™”

### ë§¤ì¼ 06:30 KST ìë™ ì‹¤í–‰

```yaml
# .github/workflows/telegram_daily.yml
on:
  schedule:
    - cron: '30 21 * * 0-4'  # UTC 21:30 = KST 06:30 (ì›”~ê¸ˆ)
  workflow_dispatch:           # ìˆ˜ë™ ì‹¤í–‰ ê°€ëŠ¥
permissions:
  contents: write              # state/ ë””ë ‰í† ë¦¬ git commitìš©
```

### ì‹¤í–‰ íë¦„

```
1. checkout â†’ ìµœì‹  ì½”ë“œ + state/ ìˆœìœ„ íŒŒì¼ pull
2. Python 3.11 ì„¤ì¹˜ + pip install
3. config.py ìƒì„± (GitHub Secrets)
4. create_current_portfolio.py â†’ ìˆœìœ„ ìŠ¤ì½”ì–´ë§ + state/ranking_YYYYMMDD.json ì €ì¥
5. send_telegram_auto.py â†’ 3ì¼ êµì§‘í•© + Death List + Survivors ì „ì†¡ + AI ë¸Œë¦¬í•‘
6. git commit + push â†’ state/ ë””ë ‰í† ë¦¬ (ìˆœìœ„ JSON ì˜ì†í™”)
```

### GitHub Secrets

Repository â†’ Settings â†’ Secrets â†’ Actions:
- `TELEGRAM_BOT_TOKEN`: ë´‡ í† í°
- `TELEGRAM_CHAT_ID`: ì±„ë„ ID
- `TELEGRAM_PRIVATE_ID`: ê°œì¸ ì±„íŒ… ID
- `GEMINI_API_KEY`: Gemini API í‚¤ (AI ë¦¬ìŠ¤í¬ ë¶„ì„ìš©)

---

## 7. ì£¼ì˜ì‚¬í•­

1. **ìºì‹œ í™œìš©**: ì¬ìˆ˜ì§‘ ë¶ˆí•„ìš” ì‹œ ìºì‹œ ëª¨ë“œ ì‚¬ìš© ê¶Œì¥
2. **FnGuide ìºì‹œ**: ë§¤ì£¼ ì¼ìš”ì¼ 03:00 KST ìë™ ê°±ì‹  (`fnguide_weekly.yml`)
3. **ë°±í…ŒìŠ¤íŠ¸ í•œê³„**:
   - ìƒì¡´ í¸í–¥ (ìƒì¥íì§€ ì¢…ëª© ë¯¸í¬í•¨)
   - ê±°ë˜ë¹„ìš© ë‹¨ìˆœí™” (0.3% ê³ ì •)
   - ìŠ¬ë¦¬í”¼ì§€ ë¯¸ë°˜ì˜

---

*ë²„ì „: 8.1 Slow In, Fast Out | ìµœì¢… ì—…ë°ì´íŠ¸: 2026-02-11 | Generated by Claude Code*
