# 한국 주식 멀티팩터 백테스팅 시스템 - 프로젝트 리포트

**생성일**: 2026-02-02
**기준일**: 2026-01-30
**버전**: 1.3.0

---

## 목차
1. [프로젝트 개요](#1-프로젝트-개요)
2. [전략 설명](#2-전략-설명)
3. [현재 포트폴리오](#3-현재-포트폴리오-2026년-1월)
4. [백테스팅 결과](#4-백테스팅-결과-2015-2025)
5. [일별 모니터링 시스템](#5-일별-모니터링-시스템)
6. [핵심 분석](#6-핵심-분석)
7. [실행 방법](#7-실행-방법)

---

## 1. 프로젝트 개요

한국 주식 시장(KOSPI/KOSDAQ)을 대상으로 퀀트 전략을 백테스팅하고, 실제 투자 가능한 현재 포트폴리오를 생성하는 시스템입니다.

### 주요 기능
- **포트폴리오 생성**: 분기별 자동 종목 선정
- **백테스팅**: 10년 (2015-2025) 전략 검증
- **일별 모니터링**: 진입 타이밍 자동 분석
- **텔레그램 알림**: 매수 적기 종목 실시간 알림

---

## 2. 전략 설명

### 전략 A: 마법공식 (Magic Formula) ⭐ 채택
- **기반**: Joel Greenblatt의 "주식시장을 이기는 작은 책"
- **팩터**:
  - 이익수익률 (Earnings Yield): EBIT / EV
  - 투하자본수익률 (ROIC): EBIT / Invested Capital
- **선정 방식**: 두 팩터 순위 합산 → 상위 30종목 선정
- **특징**: 중소형주 중심 (코스닥 67%), 분기별 리밸런싱

### 전략 B: 멀티팩터 (Multi-Factor) ⭐ 채택
- **팩터 구성**:
  - Value (40%): PER, PBR, PCR, PSR
  - Quality (40%): ROE, GPA, CFO/Assets
  - Momentum (20%): 12개월 수익률 (최근 1개월 제외)
- **선정 방식**: 팩터별 Z-score → 가중평균 → 상위 30종목 선정 (모멘텀 없는 종목 제외)
- **특징**: K-뷰티/게임/플랫폼 + 극강 모멘텀 종목 혼재

### 전략 C: 코스닥 성장 (KOSDAQ Growth) ❌ 폐기
- **의도**: 정부 코스닥 3000 정책에 특화된 전략
- **백테스팅 결과**: CAGR -5.33%, MDD -69.85% (참혹한 실패)
- **폐기 사유**: 성장률 데이터 부정확, 모멘텀 과열
- **교훈**: 정부 정책보다 펀더멘털이 중요

---

## 3. 현재 포트폴리오 (2026년 1월)

**기준일**: 2026-01-30
**재무데이터 기준**: 2025-09-30 (TTM)
**유니버스**: 2,773개 → 668개 (필터 통과)

### 전략 A TOP 10 (마법공식)

| 순위 | 종목코드 | 종목명 | 이익수익률 | 투하자본수익률 | 시장 |
|-----|---------|--------|-----------|--------------|------|
| 1 | 018290 | 브이티 | 14.9% | 44.9% | 코스닥 |
| 2 | 340570 | 티앤엘 | 13.1% | 29.9% | 코스닥 |
| 3 | 200670 | 휴메딕스 | 15.2% | 26.5% | 코스닥 |
| 4 | 383220 | F&F | 14.2% | 25.6% | 코스피 |
| 5 | 067160 | SOOP | 11.7% | 27.8% | 코스닥 |
| 6 | 462870 | 메가트론 | 11.5% | 27.2% | 코스닥 |
| 7 | 033100 | 제룡전기 | 9.7% | 33.3% | 코스닥 |
| 7 | 419530 | SAMG엔터 | 9.0% | 37.7% | 코스닥 |
| 9 | 035900 | JYP Ent. | 8.7% | 38.2% | 코스피 |
| 10 | 439260 | 샘씨엔에스 | 10.3% | 27.7% | 코스닥 |

### 전략 B TOP 10 (멀티팩터)

| 순위 | 종목코드 | 종목명 | 멀티팩터점수 | 밸류점수 | 퀄리티점수 | 모멘텀점수 | 시장 |
|-----|---------|--------|------------|---------|-----------|----------|------|
| 1 | 278470 | 에이피알 | 1.74 | -1.57 | 4.81 | 2.25 | 코스피 |
| 2 | 084670 | 동양고속 | 1.09 | 0.04 | -0.80 | 6.96 | 코스피 |
| 3 | 036620 | 감성코퍼레이션 | 1.03 | 0.22 | 2.33 | 0.05 | 코스닥 |
| 4 | 489790 | 한화비전 | 1.02 | 2.69 | 0.04 | -0.38 | 코스피 |
| 5 | 000660 | SK하이닉스 | 0.99 | -0.30 | 1.89 | 1.74 | 코스피 |
| 6 | 108490 | 로보티즈 | 0.95 | -1.84 | 0.31 | 7.80 | 코스닥 |
| 7 | 419530 | SAMG엔터 | 0.91 | 0.27 | 1.62 | 0.78 | 코스닥 |
| 8 | 124500 | 아이티센글로벌 | 0.88 | 0.33 | 0.80 | 2.16 | 코스닥 |
| 9 | 204620 | 글로벌텍스프리 | 0.85 | 0.38 | 1.96 | -0.44 | 코스닥 |
| 10 | 043260 | 성호전자 | 0.85 | 0.12 | 0.04 | 3.92 | 코스닥 |

> 모멘텀: 12개월 수익률 (최근 1개월 제외) 기반 Z-Score

### 공통 선정 종목 (11개)
브이티, 제룡전기, SOOP, SAMG엔터, 아이티센글로벌, 하나투어, 동성화인텍, 글로벌텍스프리, 유바이오로직스, 마이크로컨텍솔, 지엔씨에너지

### 시장 분포
- **전략 A**: KOSPI 6개(20%), KOSDAQ 24개(80%)
- **전략 B**: KOSPI 5개(17%), KOSDAQ 25개(83%)

---

## 4. 백테스팅 결과 (2015-2025)

### 성과 지표 비교

| 지표 | KOSPI | 전략 A | 전략 B |
|------|-------|--------|--------|
| **총 수익률** | - | **90.77%** | **102.36%** |
| **CAGR** | 7.58% | **11.98%** | **13.15%** |
| **MDD** | -43.90% | **-24.42%** | -33.90% |
| **Sharpe** | 0.27 | **0.53** | **0.53** |
| **Sortino** | - | 0.78 | 0.80 |
| **Win Rate** | - | 52.64% | 52.36% |

### In-Sample vs Out-of-Sample

| 구간 | 기간 | 전략 A CAGR | 전략 B CAGR |
|------|------|-------------|-------------|
| **In-Sample** | 2015-2023 | 3.01% | 7.06% |
| **Out-of-Sample** | 2024-2025 | **67.50%** | **47.71%** |

---

## 5. 일별 모니터링 시스템

### 진입 점수 산출 방식
| 지표 | 가중치 | 산출 방법 |
|------|--------|----------|
| RSI | 25% | RSI ≤ 30 → 1.0점 (과매도) |
| 52주 위치 | 25% | 저점 근접 → 1.0점 |
| 볼린저밴드 | 20% | 하단 접근 → 1.0점 |
| 이동평균 이격도 | 20% | 60일선 -20% → 1.0점 |
| 거래량 신호 | 10% | 평균 2배 → 1.0점 |

### 진입 등급
| 등급 | 진입 점수 | 의미 | 행동 |
|------|----------|------|------|
| 🟢 **매수 적기** | ≥ 0.6 | 기술적 저점 | 즉시 매수 검토 |
| 🟡 **관망** | 0.3 ~ 0.6 | 중립 구간 | 추가 하락 대기 |
| 🔴 **대기** | < 0.3 | 고점/과열 | 매수 보류 |

### 텔레그램 알림 기능
- **메시지 1**: 전략 설명 + 매수 추천 종목 상세
- **메시지 2**: 관망 종목 전체 (생략 없음)
- **메시지 3**: 과열 종목 전체 (생략 없음)

---

## 6. 핵심 분석

### 벤치마크 대비 초과수익
- 전략 A: KOSPI 대비 연 **+4.4%p** 초과수익
- 전략 B: KOSPI 대비 연 **+5.6%p** 초과수익

### 전략별 특성
| 특성 | 전략 A (마법공식) | 전략 B (멀티팩터) |
|------|------------------|------------------|
| 성향 | 보수적 | 공격적 |
| MDD | -24.42% | -33.90% |
| 코스닥 비중 | 67% | 77% |
| 적합 투자자 | 안정 추구 | 고수익 추구 |

### 과적합 검증
- 두 전략 모두 OOS(Out-of-Sample)에서 더 좋은 성과
- 전략 A: OOS CAGR 67.5%, Sharpe 3.27
- 전략 B: OOS CAGR 47.7%, Sharpe 1.98
- **결론: 과적합 우려 낮음**

---

## 7. 실행 방법

### 패키지 설치
```bash
pip install pykrx==1.2.3 pandas numpy matplotlib requests beautifulsoup4 lxml pyarrow tqdm
```

### 현재 포트폴리오 생성
```bash
python create_current_portfolio.py  # ~50분 소요
```

### 전체 백테스팅
```bash
python full_backtest.py  # ~15분 소요
```

### 일별 모니터링
```bash
python daily_monitor.py  # ~5분 소요
```

---

## 출력 파일 목록

### 포트폴리오 (`output/`)
- `portfolio_2026_01_strategy_a.csv` - 마법공식 30종목
- `portfolio_2026_01_strategy_b.csv` - 멀티팩터 30종목
- `portfolio_2026_01_report.txt` - 분석 리포트

### 백테스트 (`backtest_results/`)
- `backtest_strategy_A_*.csv/json` - 전략 A 결과
- `backtest_strategy_B_*.csv/json` - 전략 B 결과
- `backtest_comparison.csv` - 전략 비교

### 일별 리포트 (`daily_reports/`)
- `daily_analysis_YYYYMMDD.json` - JSON 분석 결과
- `daily_analysis_YYYYMMDD.csv` - CSV 상세 데이터
- `daily_report_YYYYMMDD.txt` - 텍스트 리포트

---

## 기술 스택

- **Python**: 3.13+
- **핵심 라이브러리**:
  - `pykrx 1.2.3`: 한국 주식 데이터 API
  - `pandas 2.2.3`: 데이터 처리
  - `requests`: HTTP 요청
  - `beautifulsoup4`: FnGuide 크롤링
- **데이터 소스**:
  - KRX (한국거래소): 시가총액, OHLCV
  - FnGuide: 재무제표 (웹 크롤링)

---

*Generated by Claude Code - 2026-02-02*
