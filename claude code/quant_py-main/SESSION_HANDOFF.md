# í•œêµ­ ì£¼ì‹ ë©€í‹°íŒ©í„° ì „ëµ ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ - ì‘ì—… í•¸ë“œì˜¤í”„ ë¬¸ì„œ

## ğŸ“‹ í”„ë¡œì íŠ¸ ê°œìš”

**ëª©í‘œ**: ã€íŒŒì´ì¬ì„ ì´ìš©í•œ í€€íŠ¸ íˆ¬ì í¬íŠ¸í´ë¦¬ì˜¤ ë§Œë“¤ê¸°ã€ ì±…ì˜ MySQL ê¸°ë°˜ ì‹œìŠ¤í…œì„ API ê¸°ë°˜ìœ¼ë¡œ ì „í™˜í•˜ê³ , ë§ˆë²•ê³µì‹ê³¼ ë©€í‹°íŒ©í„° ì „ëµì„ êµ¬í˜„í•œ ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ êµ¬ì¶•

**ë°ì´í„° ì†ŒìŠ¤**:
- pykrx API: ì‹œê°€ì´ì•¡, ê¸°ë³¸ ì¬ë¬´ë¹„ìœ¨, OHLCV
- FnGuide í¬ë¡¤ë§: ìƒì„¸ ì¬ë¬´ì œí‘œ (ì†ìµê³„ì‚°ì„œ, ì¬ë¬´ìƒíƒœí‘œ, í˜„ê¸ˆíë¦„í‘œ)
- FinanceDataReader: ë³´ì¡° ë°ì´í„° (ì„ íƒì )

**ì „ëµ**:
- ì „ëµ A: ë§ˆë²•ê³µì‹ (Magic Formula) - ì´ìµìˆ˜ìµë¥ (EBIT/EV) + íˆ¬í•˜ìë³¸ìˆ˜ìµë¥ (EBIT/IC)
- ì „ëµ B: ë©€í‹°íŒ©í„° - ë°¸ë¥˜(PER/PBR/PCR/PSR) + í€„ë¦¬í‹°(ROE/GPA/CFO) + ëª¨ë©˜í…€

---

## âœ… ì™„ë£Œëœ ì‘ì—… (2026-02-02 ì—…ë°ì´íŠ¸)

### 1. í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± ì™„ë£Œ âœ…

**ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸**: `create_current_portfolio.py`
**ê¸°ì¤€ì¼**: 2026-01-29
**ì‹¤í–‰ ì‹œê°„**: ì•½ 50ë¶„ (FnGuide í¬ë¡¤ë§ 1101ì¢…ëª©)

**ê²°ê³¼**:
- ì „ëµ A (ë§ˆë²•ê³µì‹): 30ì¢…ëª© ì„ ì •
- ì „ëµ B (ë©€í‹°íŒ©í„°): 30ì¢…ëª© ì„ ì •
- ê³µí†µ ì¢…ëª©: 1ê°œ (ì•ŒíŠ¸ 459550)

**ì¶œë ¥ íŒŒì¼**:
- `output/portfolio_2026_01_strategy_a.csv`
- `output/portfolio_2026_01_strategy_b.csv`
- `output/portfolio_2026_01_report.txt`

### 2. ì „ì²´ ë°±í…ŒìŠ¤íŒ… ì™„ë£Œ âœ…

**ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸**: `full_backtest.py`
**ê¸°ê°„**: 2015-01-01 ~ 2025-12-31 (11ë…„)
**ë¦¬ë°¸ëŸ°ì‹±**: ë¶„ê¸°ë³„ (44íšŒ)
**ì‹¤í–‰ ì‹œê°„**: ì•½ 15ë¶„

**ê²°ê³¼ ìš”ì•½**:

| ì§€í‘œ | KOSPI | ì „ëµ A | ì „ëµ B |
|------|-------|--------|--------|
| **ì´ ìˆ˜ìµë¥ ** | - | 90.77% | 102.36% |
| **CAGR** | 7.58% | 11.98% | 13.15% |
| **MDD** | -43.90% | -24.42% | -33.90% |
| **Sharpe** | 0.27 | 0.53 | 0.53 |

**IS/OOS ë¹„êµ**:

| êµ¬ê°„ | ì „ëµ A CAGR | ì „ëµ B CAGR |
|------|-------------|-------------|
| In-Sample (2015-2023) | 3.01% | 7.06% |
| Out-of-Sample (2024-2025) | **67.50%** | **47.71%** |

**ì¶œë ¥ íŒŒì¼**:
- `backtest_results/backtest_strategy_A_*.csv/json`
- `backtest_results/backtest_strategy_B_*.csv/json`
- `backtest_results/backtest_comparison.csv`
- `backtest_results/backtest_benchmark_returns.csv`

### 3. ì¼ë³„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ ì™„ë£Œ âœ…

**ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸**: `daily_monitor.py`
**ê¸°ëŠ¥**: ë§¤ì¼ ì¥ ë§ˆê° í›„ í¬íŠ¸í´ë¦¬ì˜¤ ì¢…ëª©ì˜ ì§„ì… íƒ€ì´ë° ë¶„ì„

**ì£¼ìš” ê¸°ëŠ¥ (v1.2)**:
- ê¸°ìˆ ì  ì§€í‘œ ë¶„ì„ (RSI, ë³¼ë¦°ì €ë°´ë“œ, 52ì£¼ ìœ„ì¹˜, ì´ê²©ë„)
- ì§„ì… ì ìˆ˜ ì‚°ì¶œ (0~1)
- í…”ë ˆê·¸ë¨ ì•Œë¦¼ (3ê°œ ë©”ì‹œì§€ ë¶„í• )
- ì¢…ëª©ë³„ ìƒì„¸ ê·¼ê±° ìë™ ìƒì„±
- Git ìë™ ì»¤ë°‹/í‘¸ì‹œ

**í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ êµ¬ì¡°**:
| ë©”ì‹œì§€ | ë‚´ìš© |
|--------|------|
| ë©”ì‹œì§€ 1 | ì „ëµ ì„¤ëª… + ë§¤ìˆ˜ ì¶”ì²œ ì¢…ëª© ìƒì„¸ |
| ë©”ì‹œì§€ 2 | ê´€ë§ ì¢…ëª© ì „ì²´ (ìƒëµ ì—†ìŒ) |
| ë©”ì‹œì§€ 3 | ê³¼ì—´ ì¢…ëª© ì „ì²´ (ìƒëµ ì—†ìŒ) |

**ì¶œë ¥ íŒŒì¼**:
- `daily_reports/daily_analysis_YYYYMMDD.json`
- `daily_reports/daily_analysis_YYYYMMDD.csv`
- `daily_reports/daily_report_YYYYMMDD.txt`

---

## ğŸ“ ìˆ˜ì •ëœ ì£¼ìš” íŒŒì¼ ëª©ë¡

### ì´ë²ˆ ì„¸ì…˜ì—ì„œ ìˆ˜ì •/ìƒì„±ëœ íŒŒì¼

#### 1. `data_collector.py` (ìˆ˜ì •)
**ë³€ê²½ ì‚¬í•­**: FinanceDataReader ì˜ì¡´ì„± ì œê±° (ì„ íƒì  import)
```python
# ìˆ˜ì • ì „: import FinanceDataReader as fdr (ì‹¤íŒ¨ ì‹œ ì—ëŸ¬)
# ìˆ˜ì • í›„:
try:
    import FinanceDataReader as fdr
    HAS_FDR = True
except ImportError:
    HAS_FDR = False
```
**ìœ„ì¹˜**: 15-19ì¤„

#### 2. `create_current_portfolio.py` (ì‹ ê·œ)
**ê¸°ëŠ¥**: í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± (2026ë…„ 1ì›”)
**í•µì‹¬ ë¡œì§**:
```python
# ìµœê·¼ ê±°ë˜ì¼ ìë™ íƒì§€ (ë¯¸ë˜ ë‚ ì§œ ë¬¸ì œ í•´ê²°)
from pykrx import stock as pykrx_stock
from datetime import datetime as dt, timedelta as td
_today = dt.now()
BASE_DATE = None
for _i in range(10):
    _date = (_today - td(days=_i)).strftime('%Y%m%d')
    try:
        _df = pykrx_stock.get_market_cap(_date, market='KOSPI')
        if not _df.empty:
            BASE_DATE = _date
            break
    except:
        continue
```
**ìœ„ì¹˜**: 23-36ì¤„

#### 3. `full_backtest.py` (ì‹ ê·œ)
**ê¸°ëŠ¥**: 2015-2025 ì „ì²´ ë°±í…ŒìŠ¤íŒ…
**í•µì‹¬ ë¡œì§**:
```python
def run_benchmark():
    """ë²¤ì¹˜ë§ˆí¬ (ì½”ìŠ¤í”¼) ì„±ê³¼ ê³„ì‚° - pykrx ë²„ì „ í˜¸í™˜"""
    try:
        from pykrx import stock
        kospi = stock.get_index_ohlcv(START_DATE, END_DATE, '1001')
        # ì¢…ê°€ ì»¬ëŸ¼ëª… ìë™ íƒì§€
        close_col = None
        for col in kospi.columns:
            if 'ì¢…ê°€' in col or 'close' in col.lower():
                close_col = col
                break
        if close_col is None:
            close_col = kospi.columns[3]  # ê¸°ë³¸ê°’
        # ...
    except Exception as e:
        print(f"ë²¤ì¹˜ë§ˆí¬ ìŠ¤í‚µ: {e}")
        return pd.Series(dtype=float), {}
```
**ìœ„ì¹˜**: 379-414ì¤„

#### 4. `visualize_backtest.py` (ì‹ ê·œ)
**ê¸°ëŠ¥**: ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ì‹œê°í™” (ê°œë°œ ì¤‘)

#### 5. `PROJECT_REPORT.md` (ì‹ ê·œ)
**ê¸°ëŠ¥**: í”„ë¡œì íŠ¸ ìµœì¢… ê²°ê³¼ ë¦¬í¬íŠ¸

---

## ğŸ› ì´ë²ˆ ì„¸ì…˜ì—ì„œ í•´ê²°ëœ ê¸°ìˆ  ì´ìŠˆ

### Issue #1: pykrx ë²„ì „ ì¶©ëŒ
**ì¦ìƒ**: `ModuleNotFoundError: No module named 'FinanceDataReader'`
**ì›ì¸**: FinanceDataReader ë¯¸ì„¤ì¹˜ + data_collector.py ê°•ì œ import
**í•´ê²°**:
```python
try:
    import FinanceDataReader as fdr
    HAS_FDR = True
except ImportError:
    HAS_FDR = False
```
**íŒŒì¼**: data_collector.py:15-19

### Issue #2: pykrx 1.0.51 ì¸ì½”ë”© ë¬¸ì œ
**ì¦ìƒ**: `KeyError: "None of [Index(['ì¢…ê°€', 'ì‹œê°€ì´ì•¡', ...])"`
**ì›ì¸**: pykrx 1.0.51 ë²„ì „ì—ì„œ í•œê¸€ ì»¬ëŸ¼ëª… ì¸ì½”ë”© ì˜¤ë¥˜
**í•´ê²°**: pykrx 1.2.3ìœ¼ë¡œ ì—…ê·¸ë ˆì´ë“œ
```bash
pip install pykrx --upgrade --no-deps
```

### Issue #3: ìºì‹œ ë°ì´í„° ì»¬ëŸ¼ëª… ë¶ˆì¼ì¹˜
**ì¦ìƒ**: ê¸°ì¡´ ìºì‹œ íŒŒì¼ì´ ìƒˆ ë²„ì „ê³¼ í˜¸í™˜ ì•ˆë¨
**í•´ê²°**: ìºì‹œ íŒŒì¼ ì‚­ì œ í›„ ì¬ìˆ˜ì§‘
```python
from pathlib import Path
[f.unlink() for f in Path('data_cache').glob('market_cap_*.parquet')]
```

### Issue #4: ë¯¸ë˜ ë‚ ì§œ ë°ì´í„° ì¡°íšŒ ì‹¤íŒ¨
**ì¦ìƒ**: BASE_DATE='20251231' â†’ ì‹œê°€ì´ì•¡ 0ê°œ
**ì›ì¸**: 2025ë…„ 12ì›” 31ì¼ì€ ì•„ì§ ì˜¤ì§€ ì•ŠìŒ
**í•´ê²°**: ìµœê·¼ ê±°ë˜ì¼ ìë™ íƒì§€ ë¡œì§ ì¶”ê°€
```python
for _i in range(10):
    _date = (_today - td(days=_i)).strftime('%Y%m%d')
    _df = pykrx_stock.get_market_cap(_date, market='KOSPI')
    if not _df.empty:
        BASE_DATE = _date
        break
```
**íŒŒì¼**: create_current_portfolio.py:23-36

### Issue #5: html5lib ëˆ„ë½ ê²½ê³ 
**ì¦ìƒ**: `Couldn't find a tree builder with the features you requested: html5lib`
**ì›ì¸**: BeautifulSoup html5lib íŒŒì„œ ë¯¸ì„¤ì¹˜
**í•´ê²°**:
```bash
pip install html5lib
```
**ì°¸ê³ **: ê²½ê³ ë§Œ ë°œìƒí•˜ë©° ì‘ë™ì—ëŠ” ì˜í–¥ ì—†ìŒ (lxml ëŒ€ì²´ ì‚¬ìš©)

---

## ğŸ”§ ì‹œìŠ¤í…œ í™˜ê²½ ì •ë³´

### Python í™˜ê²½
```
Python: 3.13 (miniconda3)
ê²½ë¡œ: C:\Users\jkw88\miniconda3\python.exe
```

### í•µì‹¬ íŒ¨í‚¤ì§€ ë²„ì „
```
pykrx==1.2.3          # ì¤‘ìš”: 1.0.51ì€ ì¸ì½”ë”© ë¬¸ì œ ìˆìŒ
pandas==2.2.3
numpy==2.1.3
matplotlib==3.10.0
requests==2.32.3
beautifulsoup4>=4.12.0
html5lib>=1.1         # ì„ íƒì , FnGuide íŒŒì‹±ìš©
```

### íŒ¨í‚¤ì§€ ì„¤ì¹˜ ëª…ë ¹ì–´
```bash
pip install pykrx==1.2.3 --upgrade --no-deps
pip install pandas numpy matplotlib requests beautifulsoup4 lxml html5lib pyarrow tqdm
```

---

## ğŸ“‚ í”„ë¡œì íŠ¸ êµ¬ì¡°

```
quant_py-main/
â”œâ”€â”€ í•µì‹¬ ëª¨ë“ˆ
â”‚   â”œâ”€â”€ fnguide_crawler.py      # FnGuide ì¬ë¬´ì œí‘œ í¬ë¡¤ë§
â”‚   â”œâ”€â”€ data_collector.py       # pykrx API ë˜í¼ (ìˆ˜ì •ë¨)
â”‚   â”œâ”€â”€ strategy_a_magic.py     # ë§ˆë²•ê³µì‹ ì „ëµ
â”‚   â””â”€â”€ strategy_b_multifactor.py # ë©€í‹°íŒ©í„° ì „ëµ
â”‚
â”œâ”€â”€ ì‹¤í–‰ ìŠ¤í¬ë¦½íŠ¸
â”‚   â”œâ”€â”€ create_current_portfolio.py  # í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± (ì‹ ê·œ)
â”‚   â”œâ”€â”€ full_backtest.py            # ì „ì²´ ë°±í…ŒìŠ¤íŒ… (ì‹ ê·œ)
â”‚   â”œâ”€â”€ visualize_backtest.py       # ì‹œê°í™” (ì‹ ê·œ)
â”‚   â”œâ”€â”€ daily_monitor.py            # ì¼ë³„ ëª¨ë‹ˆí„°ë§ (v1.2)
â”‚   â”œâ”€â”€ generate_report_pdf.py      # PDF ë¦¬í¬íŠ¸ ìƒì„±
â”‚   â””â”€â”€ run_backtest.py             # ìƒ˜í”Œ ë°±í…ŒìŠ¤íŠ¸
â”‚
â”œâ”€â”€ ì„¤ì • íŒŒì¼
â”‚   â”œâ”€â”€ config.py                   # í…”ë ˆê·¸ë¨/Git ì„¤ì • (gitignore)
â”‚   â””â”€â”€ config_template.py          # ì„¤ì • í…œí”Œë¦¿
â”‚
â”œâ”€â”€ ì¶œë ¥ ë””ë ‰í† ë¦¬
â”‚   â”œâ”€â”€ output/                     # í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ê²°ê³¼
â”‚   â”‚   â”œâ”€â”€ portfolio_2026_01_strategy_a.csv
â”‚   â”‚   â”œâ”€â”€ portfolio_2026_01_strategy_b.csv
â”‚   â”‚   â””â”€â”€ portfolio_2026_01_report.txt
â”‚   â”‚
â”‚   â”œâ”€â”€ backtest_results/           # ë°±í…ŒìŠ¤íŒ… ê²°ê³¼
â”‚   â”‚   â”œâ”€â”€ backtest_strategy_A_metrics.json
â”‚   â”‚   â”œâ”€â”€ backtest_strategy_A_returns.csv
â”‚   â”‚   â”œâ”€â”€ backtest_strategy_A_cumulative.csv
â”‚   â”‚   â”œâ”€â”€ backtest_strategy_A_history.csv
â”‚   â”‚   â”œâ”€â”€ backtest_strategy_B_*.csv/json
â”‚   â”‚   â”œâ”€â”€ backtest_benchmark_returns.csv
â”‚   â”‚   â””â”€â”€ backtest_comparison.csv
â”‚   â”‚
â”‚   â””â”€â”€ daily_reports/              # ì¼ë³„ ëª¨ë‹ˆí„°ë§ ê²°ê³¼
â”‚       â”œâ”€â”€ daily_analysis_YYYYMMDD.json
â”‚       â”œâ”€â”€ daily_analysis_YYYYMMDD.csv
â”‚       â””â”€â”€ daily_report_YYYYMMDD.txt
â”‚
â”œâ”€â”€ ìºì‹œ ë””ë ‰í† ë¦¬
â”‚   â””â”€â”€ data_cache/                 # ë°ì´í„° ìºì‹œ (parquet)
â”‚       â”œâ”€â”€ market_cap_ALL_*.parquet
â”‚       â”œâ”€â”€ fundamentals_*.parquet
â”‚       â””â”€â”€ fs_fnguide_*.parquet    # FnGuide ì¬ë¬´ì œí‘œ ìºì‹œ
â”‚
â”œâ”€â”€ ë¦¬í¬íŠ¸
â”‚   â””â”€â”€ Quant_Portfolio_Report_2026Q1.pdf  # PDF í¬íŠ¸í´ë¦¬ì˜¤ ë¦¬í¬íŠ¸
â”‚
â”œâ”€â”€ ë¬¸ì„œ
â”‚   â”œâ”€â”€ README.md                   # í”„ë¡œì íŠ¸ ê°œìš”
â”‚   â”œâ”€â”€ README_BACKTEST.md          # ë°±í…ŒìŠ¤íŒ… ìƒì„¸ ê°€ì´ë“œ
â”‚   â”œâ”€â”€ CHANGELOG_2026_01.md        # 2026ë…„ 1ì›” ë³€ê²½ ë¡œê·¸
â”‚   â”œâ”€â”€ SESSION_HANDOFF.md          # ì‘ì—… í•¸ë“œì˜¤í”„ (ì´ íŒŒì¼)
â”‚   â”œâ”€â”€ PROJECT_REPORT.md           # ìµœì¢… ê²°ê³¼ ë¦¬í¬íŠ¸
â”‚   â”œâ”€â”€ BACKTEST_RESULTS.md         # ë°±í…ŒìŠ¤íŠ¸ ê²°ê³¼ ë° TOP 20
â”‚   â””â”€â”€ INVESTMENT_GUIDE_2026_01.md # íˆ¬ì ê°€ì´ë“œ
â”‚
â””â”€â”€ ê¸°íƒ€
    â”œâ”€â”€ strategy_a_portfolio.csv    # ìƒ˜í”Œ ê²°ê³¼
    â”œâ”€â”€ strategy_b_portfolio.csv    # ìƒ˜í”Œ ê²°ê³¼
    â””â”€â”€ *.png                       # ë¶„ì„ ì°¨íŠ¸
```

---

## ğŸ¯ ë‹¤ìŒ ì‘ì—… ë‹¨ê³„

### 1. ì‹œê°í™” ì™„ì„± (ìš°ì„ ìˆœìœ„: ë†’ìŒ)
**íŒŒì¼**: `visualize_backtest.py`
**ì‘ì—… ë‚´ìš©**:
```python
# êµ¬í˜„ í•„ìš”:
1. ëˆ„ì  ìˆ˜ìµë¥  ì°¨íŠ¸ (ì „ëµ A vs B vs KOSPI)
2. ë“œë¡œìš°ë‹¤ìš´ ì°¨íŠ¸
3. ì—°ë„ë³„ ì„±ê³¼ íˆíŠ¸ë§µ
4. ì›”ë³„ ìˆ˜ìµë¥  ë¶„í¬
```

### 2. ë¦¬í¬íŠ¸ ìë™í™” (ìš°ì„ ìˆœìœ„: ì¤‘ê°„) âœ… ì™„ë£Œ
**ì™„ë£Œëœ ì‘ì—…**:
- âœ… PDF ë¦¬í¬íŠ¸ ìƒì„± (`generate_report_pdf.py`)
- âœ… ì¼ë³„ í…”ë ˆê·¸ë¨ ë¦¬í¬íŠ¸ (3ê°œ ë©”ì‹œì§€ ë¶„í• )
- âœ… ì¢…ëª©ë³„ íˆ¬ì ì‚¬ìœ  ìë™ ì‘ì„±

### 3. ì‹¤ì‹œê°„ ëª¨ë‹ˆí„°ë§ (ìš°ì„ ìˆœìœ„: ë‚®ìŒ) âœ… ëŒ€ë¶€ë¶„ ì™„ë£Œ
**ì™„ë£Œëœ ì‘ì—…**:
- âœ… í¬íŠ¸í´ë¦¬ì˜¤ ì¼ì¼ ì„±ê³¼ ì¶”ì  (`daily_monitor.py`)
- âœ… í…”ë ˆê·¸ë¨ ì•Œë¦¼ ì‹œìŠ¤í…œ
- ğŸ”² Streamlit ëŒ€ì‹œë³´ë“œ (ì„ íƒì )

### 4. ì „ëµ ê°œì„  (ìš°ì„ ìˆœìœ„: ë‚®ìŒ)
**ì‘ì—… ë‚´ìš©**:
- âœ… ëª¨ë©˜í…€ íŒ©í„° ì¶”ê°€ ì™„ë£Œ (12ê°œì›” ìˆ˜ìµë¥ , ìµœê·¼ 1ê°œì›” ì œì™¸)
- ì„¹í„° ì¤‘ë¦½í™”
- ê±°ë˜ë¹„ìš© ìµœì í™”

---

## âš ï¸ ì•Œë ¤ì§„ ì œí•œì‚¬í•­

### ë°ì´í„° ê´€ë ¨
1. **FnGuide í¬ë¡¤ë§ ì†ë„**: ì¢…ëª©ë‹¹ ~2ì´ˆ â†’ 1000ì¢…ëª© ì‹œ ~30ë¶„
2. **ì¼ë¶€ ë‚ ì§œ ë°ì´í„° ëˆ„ë½**: ì—°ë§(12/31) ë“± íœ´ì¥ì¼ ìºì‹œ ë¬¸ì œ
3. **ì„ í˜¸ì£¼/ìš°ì„ ì£¼ ì²˜ë¦¬**: ì¼ë¶€ ì¢…ëª© ì¬ë¬´ì œí‘œ ëˆ„ë½

### ì „ëµ ê´€ë ¨
1. ~~**ëª¨ë©˜í…€ ë¯¸êµ¬í˜„**~~: âœ… ì™„ë£Œ (12ê°œì›” ìˆ˜ìµë¥ , ìµœê·¼ 1ê°œì›” ì œì™¸, ëª¨ë©˜í…€ ì—†ëŠ” ì¢…ëª© ìë™ ì œì™¸)
2. **ì„¹í„° ë¶„ë¥˜ ì—†ìŒ**: ì—…ì¢… ì¤‘ë¦½í™” ë¯¸ì ìš©
3. **ê±°ë˜ë¹„ìš©**: 0.3% ê³ ì • (ì‹¤ì œ ìŠ¬ë¦¬í”¼ì§€ ë¯¸ë°˜ì˜)

### ë°±í…ŒìŠ¤íŒ… ê´€ë ¨
1. **ìƒì¡´ í¸í–¥**: ìƒì¥íì§€ ì¢…ëª© ë¯¸í¬í•¨
2. **Look-ahead bias**: ì¬ë¬´ì œí‘œ ê³µì‹œ ì‹œì°¨ ë¯¸ë°˜ì˜ ê°€ëŠ¥ì„±
3. **ë°°ë‹¹ ë¯¸ë°˜ì˜**: ë°°ë‹¹ ì¬íˆ¬ì ë¯¸êµ¬í˜„

---

## ğŸš€ ë¹ ë¥¸ ì‹œì‘ ê°€ì´ë“œ

```bash
# 1. Repository í´ë¡ 
git clone https://github.com/VolumeQuant/quant_py-main.git
cd quant_py-main

# 2. íŒ¨í‚¤ì§€ ì„¤ì¹˜
pip install pykrx==1.2.3 --upgrade --no-deps
pip install pandas numpy matplotlib requests beautifulsoup4 lxml html5lib pyarrow tqdm

# 3. í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± (~50ë¶„ ì†Œìš”)
python create_current_portfolio.py

# 4. ì „ì²´ ë°±í…ŒìŠ¤íŒ… (~15ë¶„ ì†Œìš”, ìºì‹œ ìˆì„ ê²½ìš°)
python full_backtest.py

# 5. ê²°ê³¼ í™•ì¸
cat output/portfolio_2026_01_report.txt
cat backtest_results/backtest_comparison.csv
```

---

## ğŸ“ ì‘ì—… ë¡œê·¸

| ë‚ ì§œ | ì‘ì—…ì | ì£¼ìš” ì‘ì—… | íŒŒì¼ |
|------|--------|-----------|------|
| 2024-12-31 | Claude | FnGuide í¬ë¡¤ëŸ¬ êµ¬í˜„ | fnguide_crawler.py |
| 2024-12-31 | Claude | ë°ì´í„° ìˆ˜ì§‘ê¸° êµ¬í˜„ | data_collector.py |
| 2024-12-31 | Claude | ë§ˆë²•ê³µì‹/ë©€í‹°íŒ©í„° ì „ëµ êµ¬í˜„ | strategy_*.py |
| 2024-12-31 | Claude | ìƒ˜í”Œ ë°±í…ŒìŠ¤íŠ¸ ë° ì‹œê°í™” | run_backtest.py, visualize_results.py |
| **2026-01-30** | **Claude** | **data_collector.py FDR ì˜ì¡´ì„± ì œê±°** | **data_collector.py:15-19** |
| **2026-01-30** | **Claude** | **í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± ìŠ¤í¬ë¦½íŠ¸** | **create_current_portfolio.py** |
| **2026-01-30** | **Claude** | **ì „ì²´ ë°±í…ŒìŠ¤íŒ… ì‹œìŠ¤í…œ êµ¬í˜„** | **full_backtest.py** |
| **2026-01-30** | **Claude** | **pykrx 1.2.3 ì—…ê·¸ë ˆì´ë“œ ë° í˜¸í™˜ì„± ìˆ˜ì •** | **full_backtest.py:379-414** |
| **2026-01-30** | **Claude** | **í”„ë¡œì íŠ¸ ë¦¬í¬íŠ¸ ë° í•¸ë“œì˜¤í”„ ë¬¸ì„œ** | **PROJECT_REPORT.md, SESSION_HANDOFF.md** |
| **2026-01-30** | **Claude** | **ì „ëµ C ì½”ìŠ¤ë‹¥ ì„±ì¥ ì „ëµ êµ¬í˜„** | **strategy_c_kosdaq_growth.py** |
| **2026-01-30** | **Claude** | **ì „ëµ C ë°±í…ŒìŠ¤íŒ… ë° ì‹¤íŒ¨ (CAGR -5.33%)** | **backtest_strategy_c.py** |
| **2026-01-30** | **Claude** | **ì „ëµ C íê¸° ë° ì „ëµ A ì½”ìŠ¤ë‹¥ ë¶„ì„** | **ì „ëµ A ì½”ìŠ¤ë‹¥ 18ê°œ í™•ì¸** |
| **2026-01-30** | **Claude** | **íˆ¬ì ë¹„ì¤‘ ì „ëµ ë° ì½”ìŠ¤ë‹¥ 3000 ì •ì±… ë…¼ì˜** | **ë¬¸ì„œ ì—…ë°ì´íŠ¸** |
| **2026-01-31** | **Claude** | **ì¼ë³„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ êµ¬í˜„** | **daily_monitor.py** |
| **2026-01-31** | **Claude** | **í…”ë ˆê·¸ë¨ ì„¤ì • ë¶„ë¦¬** | **config.py, config_template.py** |
| **2026-01-31** | **Claude** | **í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ ì „ì²´ í¬íŠ¸í´ë¦¬ì˜¤ í‘œì‹œ** | **daily_monitor.py** |
| **2026-02-01** | **Claude** | **í…”ë ˆê·¸ë¨ ë©”ì‹œì§€ 3ë¶„í•  (ì „ëµ/ê´€ë§/ê³¼ì—´)** | **daily_monitor.py:712-794** |
| **2026-02-01** | **Claude** | **ì¢…ëª©ë³„ ìƒì„¸ ê·¼ê±° ì‹œìŠ¤í…œ ì¶”ê°€** | **daily_monitor.py:598-698** |
| **2026-02-02** | **Claude** | **ëª¨ë©˜í…€ íŒ©í„° êµ¬í˜„ ì™„ë£Œ** | **strategy_b_multifactor.py** |
| **2026-02-02** | **Claude** | **ëª¨ë©˜í…€ ì—†ëŠ” ì¢…ëª© ìë™ ì œì™¸ ë¡œì§** | **strategy_b_multifactor.py:245-250** |
| **2026-02-02** | **Claude** | **ì „ì²´ ìœ ë‹ˆë²„ìŠ¤ ê°€ê²© ë°ì´í„° ìˆ˜ì§‘** | **create_current_portfolio.py** |

---

## ğŸ¯ í˜„ì¬ ìƒíƒœ ìš”ì•½

**ì™„ë£Œìœ¨**: **98%** âœ…

**ì™„ë£Œëœ í•µì‹¬ ê¸°ëŠ¥**:
- âœ… FnGuide í¬ë¡¤ë§ (ê³„ì •ê³¼ëª© ë§¤í•‘ í¬í•¨)
- âœ… pykrx ë°ì´í„° ìˆ˜ì§‘ (ë²„ì „ í˜¸í™˜ì„± ì²˜ë¦¬)
- âœ… ë§ˆë²•ê³µì‹ ì „ëµ êµ¬í˜„
- âœ… ë©€í‹°íŒ©í„° ì „ëµ êµ¬í˜„
- âœ… **í˜„ì¬ í¬íŠ¸í´ë¦¬ì˜¤ ìƒì„± (2026ë…„ 1ì›”)**
- âœ… **ì „ì²´ ë°±í…ŒìŠ¤íŒ… (2015-2025, 11ë…„)**
- âœ… **IS/OOS ì„±ê³¼ ë¹„êµ**
- âœ… **ë²¤ì¹˜ë§ˆí¬ ëŒ€ë¹„ ë¶„ì„**
- âœ… **ì¼ë³„ ëª¨ë‹ˆí„°ë§ ì‹œìŠ¤í…œ (daily_monitor.py)**
- âœ… **í…”ë ˆê·¸ë¨ ì•Œë¦¼ (3ê°œ ë©”ì‹œì§€ ë¶„í• , ì¢…ëª©ë³„ ìƒì„¸ ê·¼ê±°)**
- âœ… **Git ìë™ ì»¤ë°‹/í‘¸ì‹œ**
- âœ… **PDF ë¦¬í¬íŠ¸ ìƒì„±**

**ë‚¨ì€ ì‘ì—…**:
- ğŸ”² ì‹œê°í™” ì°¨íŠ¸ ì™„ì„±
- âœ… ëª¨ë©˜í…€ íŒ©í„° ì¶”ê°€ ì™„ë£Œ

---

## ğŸ”¬ ì „ëµ ì—…ê·¸ë ˆì´ë“œ ê²€í†  (2026-02-02)

### ì œì•ˆ: Korea Hybrid Strategy v2.0

ì‚¬ìš©ìê°€ ë¯¸êµ­ í”„ë¡œì íŠ¸ì˜ "EPS ëª¨ë©˜í…€" ì² í•™ì„ í•œêµ­ ì‹œì¥ì— ì ìš©í•˜ëŠ” ì „ëµ ì—…ê·¸ë ˆì´ë“œë¥¼ ì œì•ˆí–ˆìŠµë‹ˆë‹¤.

#### í•µì‹¬ ì•„ì´ë””ì–´

| êµ¬ë¶„ | ë‚´ìš© |
|------|------|
| **Growth Filter** | Forward EPS ìƒí–¥ ì¶”ì„¸ (ì»¨ì„¼ì„œìŠ¤ ë¦¬ë¹„ì „) |
| **Safety Filter** | ë¶€ì±„ë¹„ìœ¨ < 200%, ì´ìë³´ìƒë°°ìœ¨ > 1 |
| **Value Filter** | Forward PER < 20 |
| **Ranking** | ì„¹í„° ë‚´ ìƒëŒ€í‰ê°€ (Z-Score) + ìˆ˜ê¸‰ |

#### ì´ˆê¸° í‰ê°€

**ìš°ë ¤ ì‚¬í•­** (ê¸°ì¡´ íŒë‹¨):
1. Forward EPS ì»¨ì„¼ì„œìŠ¤ ë°ì´í„° ë¬´ë£Œ ì†ŒìŠ¤ ë¶€ì¬
2. ê²€ì¦ëœ ì „ëµ(A/B) íê¸° ë¦¬ìŠ¤í¬
3. ê³¼ì í•© ìœ„í—˜ ì¦ê°€

#### FnGuide ì»¨ì„¼ì„œìŠ¤ ë°ì´í„° í¬ë¡¤ë§ í…ŒìŠ¤íŠ¸ âœ…

**ê²°ê³¼**: Forward EPS/PER ë°ì´í„° **ìˆ˜ì§‘ ê°€ëŠ¥** í™•ì¸!

```
URL: comp.fnguide.com/SVO2/ASP/SVD_Main.asp?gicode=A{ticker}
í…Œì´ë¸” 7: íˆ¬ìì˜ê²¬ / ì»¨ì„¼ì„œìŠ¤ ìš”ì•½
```

**í…ŒìŠ¤íŠ¸ ê²°ê³¼**:

| ì¢…ëª© | í¬ê¸° | Forward EPS | Forward PER | ì• ë„ë¦¬ìŠ¤íŠ¸ ìˆ˜ |
|------|------|-------------|-------------|--------------|
| ì‚¼ì„±ì „ì (005930) | ëŒ€í˜• | 20,072ì› | 8.0ë°° | 25ëª… |
| ë¸Œì´í‹° (018290) | ì¤‘í˜• | 1,716ì› | 12.0ë°° | 2ëª… |
| SAMGì—”í„° (419530) | ì†Œí˜• | 2,987ì› | 12.4ë°° | 6ëª… |

**í•µì‹¬ ë°œê²¬**: ì†Œí˜•ì£¼ë„ ì• ë„ë¦¬ìŠ¤íŠ¸ ì»¤ë²„ë¦¬ì§€ ì¡´ì¬!

#### ìˆ˜ì •ëœ íŒë‹¨

```
ê¸°ì¡´: Forward EPS ë°ì´í„° ì—†ìŒ â†’ âŒ êµ¬í˜„ ë¶ˆê°€
ìˆ˜ì •: Forward EPS ë°ì´í„° ìˆìŒ â†’ âœ… êµ¬í˜„ ê°€ëŠ¥
```

#### êµ¬í˜„ ë°©í–¥ ê¶Œì¥

**ì „ë©´ êµì²´ (ë¹„ê¶Œì¥)**:
- ê¸°ì¡´ ì „ëµ A/B íê¸°
- ê²€ì¦ë˜ì§€ ì•Šì€ ìƒˆ ì „ëµìœ¼ë¡œ ëŒ€ì²´
- ë¦¬ìŠ¤í¬ ë†’ìŒ

**ì ì§„ì  ì¶”ê°€ (ê¶Œì¥)** â­:
```
í˜„ì¬ ì „ëµ A (ë§ˆë²•ê³µì‹) - ìœ ì§€
í˜„ì¬ ì „ëµ B (ë©€í‹°íŒ©í„°) - ìœ ì§€
+ ì‹ ê·œ ì „ëµ C (Hybrid) - Forward EPS ê¸°ë°˜ ì¶”ê°€
```

#### ë‚¨ì€ ê³¼ì œ

1. **ì»¤ë²„ë¦¬ì§€ í…ŒìŠ¤íŠ¸**: 668ê°œ ìœ ë‹ˆë²„ìŠ¤ ì¤‘ ì»¨ì„¼ì„œìŠ¤ ì»¤ë²„ë¦¬ì§€ ë¹„ìœ¨ í™•ì¸
2. **EPS ëª¨ë©˜í…€ êµ¬í˜„**:
   - ì˜µì…˜ A: íˆìŠ¤í† ë¦¬ ì €ì¥ â†’ ë§¤ì¼ í¬ë¡¤ë§ í›„ 1ê°œì›” ë¹„êµ
   - ì˜µì…˜ B: YoY ì„±ì¥ë¥  â†’ Forward EPS / ì „ë…„ ì‹¤ì  EPS
   - ì˜µì…˜ C: ë¶„ê¸° ì˜ì—…ì´ìµ YoY â†’ ê¸°ì¡´ ë°ì´í„° í™œìš© (ì¦‰ì‹œ ê°€ëŠ¥)
3. **Safety Filter ì¶”ê°€**: ë¶€ì±„ë¹„ìœ¨, ì´ìë³´ìƒë°°ìœ¨ í•„í„° (ê¸°ì¡´ ë°ì´í„°ë¡œ ì¦‰ì‹œ ê°€ëŠ¥)

#### í…ŒìŠ¤íŠ¸ ì½”ë“œ

**íŒŒì¼**: `test_consensus_crawl.py`
```python
def get_consensus_data(ticker):
    url = f'http://comp.fnguide.com/SVO2/ASP/SVD_Main.asp?pGB=1&gicode=A{ticker}'
    tables = pd.read_html(url, displayed_only=False, encoding='utf-8')

    # í…Œì´ë¸” 7: ì»¨ì„¼ì„œìŠ¤ ìš”ì•½
    if len(tables) > 7:
        consensus_summary = tables[7]
        # ì»¬ëŸ¼: íˆ¬ìì˜ê²¬, ëª©í‘œì£¼ê°€, EPS, PER, ì• ë„ë¦¬ìŠ¤íŠ¸ìˆ˜
        forward_eps = consensus_summary['EPS'].iloc[0]
        forward_per = consensus_summary['PER'].iloc[0]
```

---

**ë¬¸ì„œ ë²„ì „**: 3.2
**ìµœì¢… ì—…ë°ì´íŠ¸**: 2026-02-02
**ì‘ì„±ì**: Claude Opus 4.5
